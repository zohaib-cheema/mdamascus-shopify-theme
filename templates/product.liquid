{% comment %}
  The product page template
{% endcomment %}

<div class="product-page">
  <div class="page-width">
    <div class="product-grid">
      <div class="product-media">
        {%- if product.media.size > 0 -%}
          <div class="product-media-gallery">
            {%- for media in product.media -%}
              <div class="product-media-item">
                {%- case media.media_type -%}
                  {%- when 'image' -%}
                    <img
                      src="{{ media | image_url: width: 800 }}"
                      alt="{{ media.alt | escape }}"
                      loading="lazy"
                      width="{{ media.width }}"
                      height="{{ media.height }}"
                    >
                  {%- when 'video' -%}
                    {{ media | video_tag: controls: true }}
                  {%- when 'external_video' -%}
                    {{ media | external_video_tag }}
                  {%- when 'model' -%}
                    {{ media | model_viewer_tag }}
                {%- endcase -%}
              </div>
            {%- endfor -%}
          </div>
        {%- endif -%}
      </div>

      <div class="product-info">
        <h1 class="product-title">{{ product.title }}</h1>
        
        {%- if product.vendor != blank -%}
          <p class="product-vendor">{{ product.vendor }}</p>
        {%- endif -%}

        <div class="product-price">
          {%- if product.compare_at_price > product.price -%}
            <span class="price price--sale">{{ product.price | money }}</span>
            <span class="price price--compare">{{ product.compare_at_price | money }}</span>
          {%- else -%}
            <span class="price">{{ product.price | money }}</span>
          {%- endif -%}
        </div>

        {%- if product.description != blank -%}
          <div class="product-description">
            {{ product.description }}
          </div>
        {%- endif -%}

        {%- form 'product', product, id: 'product-form', class: 'form', novalidate: 'novalidate', data-type: 'add-to-cart-form' -%}
          <input type="hidden" name="id" value="{{ product.selected_or_first_available_variant.id }}">
          <input type="hidden" name="quantity" value="1">
          <div class="product-form__buttons">
            <button
              type="submit"
              name="add"
              class="product-form__cart-submit button button--full-width button--primary"
              {% if product.selected_or_first_available_variant.available == false %}disabled{% endif %}
            >
              <span>
                {%- if product.selected_or_first_available_variant.available -%}
                  {{ 'products.product.add_to_cart' | t }}
                {%- else -%}
                  {{ 'products.product.sold_out' | t }}
                {%- endif -%}
              </span>
              <div class="loading-overlay__spinner hidden">
                <svg aria-hidden="true" focusable="false" class="spinner" viewBox="0 0 66 66" xmlns="http://www.w3.org/2000/svg">
                  <circle class="path" fill="none" stroke-width="6" cx="33" cy="33" r="30"></circle>
                </svg>
              </div>
            </button>
          </div>
        {%- endform -%}

        {%- if product.metafields.custom.product_features != blank -%}
          <div class="product-features">
            <h3>{{ 'products.product.features' | t }}</h3>
            {{ product.metafields.custom.product_features }}
          </div>
        {%- endif -%}
      </div>
    </div>
  </div>
</div>

<style>
  .product-page {
    padding: 6rem 0;
  }

  .product-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 5rem;
    align-items: start;
  }

  .product-media-gallery {
    display: grid;
    gap: 1.5rem;
  }

  .product-media-item img {
    width: 100%;
    height: auto;
    border-radius: 0.5rem;
  }

  .product-title {
    font-size: 2.5rem;
    margin-bottom: 1.5rem;
    color: var(--color-base-text);
  }

  .product-vendor {
    color: var(--color-base-text);
    opacity: 0.7;
    margin-bottom: 1.5rem;
  }

  .product-price {
    margin-bottom: 2.5rem;
  }

  .price--sale {
    color: var(--color-base-accent-1);
    font-weight: bold;
  }

  .price--compare {
    text-decoration: line-through;
    opacity: 0.7;
    margin-left: 0.5rem;
  }

  .product-description {
    margin-bottom: 2.5rem;
    line-height: 1.6;
  }

  .product-form__buttons {
    margin-bottom: 2.5rem;
  }

  .button--full-width {
    width: 100%;
    padding: 1rem 2rem;
    background-color: var(--color-base-accent-1);
    color: var(--color-base-background-1);
    border: none;
    border-radius: 0.5rem;
    font-size: 1.1rem;
    font-weight: bold;
    cursor: pointer;
    transition: all 0.3s ease;
  }

  .button--full-width:hover {
    opacity: 0.9;
    transform: translateY(-2px);
  }

  .button--full-width:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }

  .product-features {
    margin-top: 3rem;
    padding-top: 2.5rem;
    border-top: 1px solid var(--color-base-background-2);
  }

  .product-features h3 {
    margin-bottom: 1.5rem;
    color: var(--color-base-text);
  }

  @media screen and (max-width: 1024px) {
    .product-page {
      padding: 4rem 0;
    }

    .product-grid {
      gap: 3rem;
    }
  }

  @media screen and (max-width: 768px) {
    .product-page {
      padding: 3rem 0;
    }

    .product-grid {
      grid-template-columns: 1fr;
      gap: 2rem;
    }
    
    .product-title {
      font-size: 2rem;
    }

    .product-media-gallery {
      gap: 1rem;
    }
  }
</style>
 
 <div id='Areviewsapp' class='page-full'>{%  render 'aliexpress_reviews' , product: product %}</div>